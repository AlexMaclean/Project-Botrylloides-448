#!/bin/bash

DATA_FILE=data.csv
ASSEMBLE=/home/ubuntu/Project-Botrylloides-448/scripts/assemble-with-stats
CONFIG_FILE=alternate-reads.conf

#-------------------------------------------------------------------------------

# Top level function to run experiment, just loops through values running trials
function run-experiment {
    echo "Long Read Count,$($ASSEMBLE header)" > $DATA_FILE
    for V in {1..60}; do run-trial $V; done
}

# Given a value runs a timed version of MaSurCa on it and record stats
function run-trial {
    OUT_PATH=$(printf "long-read-%i-trial" $1)

    printf '\e[1;7m %-6s \e[m\ue0b0\n' "$OUT_PATH"

    # mkdir "$OUT_PATH"
    # cp "$CONFIG_FILE" "$OUT_PATH/"
    # cd "$OUT_PATH" || return

    # # Change the contig file so it has the right thread value
    # masurca $(basename $CONFIG_FILE) || exit 1
    # STATS=$($ASSEMBLE)

    # cd ..
    # echo "$1,$STATS" >> $DATA_FILE
}

run-experiment
